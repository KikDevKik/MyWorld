 INSTRUCCIONES PARA LA FASE 2: REFACTORIZACIN DE LA FORJA (DRAMATIS PERSONAE)

Hola Jules (del futuro),

El usuario ha aprobado la Fase 1 (Implementaci贸n del Hub). Ahora debemos refactorizar el Dashboard, espec铆ficamente el panel derecho "Dramatis Personae".

 SITUACIN ACTUAL:
1.  **Scope Global Incorrecto:** Actualmente, `ForgeDashboard.tsx` carga *todos* los personajes del usuario (`users/{uid}/characters`) en una lista global. Esto provoca que aparezcan personajes de otras historias/sagas en la saga actual.
2.  **Typo/Nombre Incorrecto:** El usuario indic贸 que el t铆tulo "DRAMATIS PERSONAE" est谩 "mal escrito" o no es el deseado. (Revisar si prefiere "PERSONAJES" o corregir la ligadura latina).

 OBJETIVOS DE LA FASE 2:

1.  **Scoping Estricto (Saga Context):**
    -   Modificar la l贸gica en `ForgeDashboard.tsx`.
    -   **ELIMINAR:** La suscripci贸n global a `collection(db, "users", auth.currentUser.uid, "characters")`.
    -   **IMPLEMENTAR:** Una l贸gica basada en el contenido de la carpeta (Saga) seleccionada.
        -   Opci贸n A: Filtrar la query de Firestore por `folderId` == `saga.id` (si el campo existe).
        -   Opci贸n B (Preferida): Usar el resultado del escaneo de archivos (`scanSaga`). Si la carpeta contiene archivos `.md` o `.json` que representan fichas, cargar SOLO esos.
    -   El objetivo es: "Si el archivo de Anna no est谩 en la carpeta 'Saga TDB', Anna no debe aparecer como 'Existente' aqu铆".

2.  **Correcci贸n UI (Panel Derecho):**
    -   Renombrar el encabezado del componente `ForgeContextDock.tsx`.
    -   Cambiar "DRAMATIS PERSONAE" por "PERSONAJES DE LA SAGA" (o confirmar preferencia).
    -   Asegurar que la lista se refresque correctamente al cambiar de Saga en el Hub.

3.  **L贸gica de Ghosts (Entidades Detectadas):**
    -   Confirmar que la detecci贸n de entidades (`analyzeNexusFile`) solo se ejecute sobre los archivos *dentro* de la carpeta de la Saga seleccionada. (Esto parece ya estar medio implementado en `ForgeDashboard`, verificar y reforzar).

锔 ARCHIVOS CLAVE:
-   `src/components/forge/ForgeDashboard.tsx` (L贸gica de carga de datos).
-   `src/components/forge/ForgeContextDock.tsx` (UI del panel derecho).

锔 NOTA IMPORTANTE:
El usuario busca "eficacia sobre velocidad". Aseg煤rate de que al entrar a una Saga, la sensaci贸n sea de "aislamiento contextual": solo veo lo que existe en esta historia.

隆Buena suerte, Comandante! 
