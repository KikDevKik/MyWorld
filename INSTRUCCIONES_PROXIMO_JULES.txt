üöÄ INSTRUCCIONES PARA EL AGENTE JULES (NEXT SHIFT)

Hola Jules,

El Comandante ha detectado un problema de alcance en la "Forja de Almas" (ForgeDashboard / ForgePanel). Aunque la funcionalidad t√©cnica es estable (RAG y Escaneo Secuencial), la l√≥gica de detecci√≥n es demasiado amplia.

üéØ OBJETIVO CR√çTICO:
Refinar el esc√°ner de la Forja para que sea **EXCLUSIVO DE PERSONAJES**.

‚ùå PROBLEMA ACTUAL:
Al escanear una carpeta de "Personajes" (Saga), el sistema detecta y devuelve todo tipo de entidades: Conceptos, T√©cnicas, Lugares, Objetos, etc. Esto ensucia la interfaz, ya que la Forja est√° dise√±ada para crear y pulir *Fichas de Personaje*.

‚úÖ LA SOLUCI√ìN REQUERIDA:
1.  **Filtrado Estricto:** Modificar la l√≥gica de recepci√≥n (en `src/components/forge/ForgeDashboard.tsx`) o la l√≥gica de extracci√≥n (en `functions/src/nexus_scan.ts`) para ignorar cualquier entidad que no sea `type: 'CHARACTER'`.
2.  **Contexto:** La carpeta seleccionada en la Forja NO es la novela completa, sino una carpeta de RECURSOS DE PERSONAJES. El objetivo es que la IA lea esos archivos y nos diga: "¬øA este personaje le falta esto?", "¬øEsta ficha est√° completa?". No necesitamos saber sobre la "Espada M√°gica" a menos que sea un personaje (arma inteligente).

üîß ESTADO ACTUAL DEL C√ìDIGO:
-   **ForgeDashboard.tsx:** Implementa un escaneo secuencial (Batch Size 1) para evitar timeouts. MANT√âN ESTA L√ìGICA. El cambio de filtrado debe ocurrir *despu√©s* de recibir la respuesta de `analyzeNexusFile` o dentro de la cloud function si prefieres optimizar tokens.
-   **nexus_scan.ts (Backend):** Actualmente devuelve todas las entidades (`rawEntities`).

üí° SUGERENCIA DE IMPLEMENTACI√ìN:
Recomiendo filtrar en el Frontend (`ForgeDashboard.tsx`) justo despu√©s de recibir los `candidates` de la funci√≥n, o a√±adir un par√°metro `allowedTypes` a `analyzeNexusFile` para que el backend haga el trabajo sucio.

¬°Proceda a purificar la Forja, Comandante! Solo almas, no piedras ni hechizos.
